\hypertarget{eforth__core_8cpp}{}\doxysection{src/eforth\+\_\+core.cpp File Reference}
\label{eforth__core_8cpp}\index{src/eforth\_core.cpp@{src/eforth\_core.cpp}}


e\+Forth core controller module  


{\ttfamily \#include \char`\"{}eforth\+\_\+core.\+h\char`\"{}}\newline
Include dependency graph for eforth\+\_\+core.\+cpp\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{eforth__core_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structIsrRec}{Isr\+Rec}}
\end{DoxyCompactItemize}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{eforth__core_8cpp_ac1200c4eb34e01fd0cfb9f578d8caa27}{\+\_\+fake\+\_\+intr}}(hits)
\item 
\#define \mbox{\hyperlink{eforth__core_8cpp_afc09b15fce90b9e00aa7277e7edd5c4e}{Y\+I\+E\+L\+D\+\_\+\+P\+E\+R\+I\+OD}}~50      /$\ast$$\ast$ 256 max (1ms $\sim$ 50$\ast$20us/op) $\ast$/
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{eforth__core_8cpp_a0132f57c344961e9ff4037dd06b06948}{intr\+\_\+reset}} ()
\begin{DoxyCompactList}\small\item\em reset interrupts \end{DoxyCompactList}\item 
\mbox{\hyperlink{eforth__config_8h_a5fd90490ca5b2ceb72bf8b2c89a9634b}{IU}} \mbox{\hyperlink{eforth__core_8cpp_a2c97726ffb62839e8c6fe399f6ed83f3}{intr\+\_\+service}} ()
\item 
void \mbox{\hyperlink{eforth__core_8cpp_a1014535a559fffca3f07236e59a20aaf}{intr\+\_\+add\+\_\+tmisr}} (\mbox{\hyperlink{eforth__config_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}} i, \mbox{\hyperlink{eforth__config_8h_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}} ms, \mbox{\hyperlink{eforth__config_8h_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}} xt)
\item 
void \mbox{\hyperlink{eforth__core_8cpp_afccceb6e854a93069b6f29bf97657437}{intr\+\_\+add\+\_\+pcisr}} (\mbox{\hyperlink{eforth__config_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}} p, \mbox{\hyperlink{eforth__config_8h_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}} xt)
\item 
void \mbox{\hyperlink{eforth__core_8cpp_a57ebb184e4580915047ed5a46ff53263}{intr\+\_\+pci\+\_\+enable}} (\mbox{\hyperlink{eforth__config_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}} f)
\item 
void \mbox{\hyperlink{eforth__core_8cpp_a7336f28b0a79390b012f36a71e2df5d9}{intr\+\_\+timer\+\_\+enable}} (\mbox{\hyperlink{eforth__config_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}} f)
\item 
\mbox{\hyperlink{eforth__core_8cpp_a5686c229bdef50123688ab6cb1404230}{I\+SR}} (T\+I\+M\+E\+R2\+\_\+\+C\+O\+M\+P\+A\+\_\+vect)
\item 
\mbox{\hyperlink{eforth__core_8cpp_aa64c6dce15e9de9105b4ae9533c9a267}{I\+SR}} (P\+C\+I\+N\+T0\+\_\+vect)
\item 
\mbox{\hyperlink{eforth__core_8cpp_afe6035149a64d5f448fbda08e9d1b67f}{I\+SR}} (P\+C\+I\+N\+T1\+\_\+vect)
\item 
\mbox{\hyperlink{eforth__core_8cpp_a9c4665742c6b6eb1f0bb9dde41f7cba3}{I\+SR}} (P\+C\+I\+N\+T2\+\_\+vect)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{structIsrRec}{Isr\+Rec}} \mbox{\hyperlink{eforth__core_8cpp_a6c7ba52511bb7f580b211f466a58001c}{ir}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
e\+Forth core controller module 



\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{eforth__core_8cpp_ac1200c4eb34e01fd0cfb9f578d8caa27}\label{eforth__core_8cpp_ac1200c4eb34e01fd0cfb9f578d8caa27}} 
\index{eforth\_core.cpp@{eforth\_core.cpp}!\_fake\_intr@{\_fake\_intr}}
\index{\_fake\_intr@{\_fake\_intr}!eforth\_core.cpp@{eforth\_core.cpp}}
\doxysubsubsection{\texorpdfstring{\_fake\_intr}{\_fake\_intr}}
{\footnotesize\ttfamily \#define \+\_\+fake\+\_\+intr(\begin{DoxyParamCaption}\item[{}]{hits }\end{DoxyParamCaption})}

\mbox{\Hypertarget{eforth__core_8cpp_afc09b15fce90b9e00aa7277e7edd5c4e}\label{eforth__core_8cpp_afc09b15fce90b9e00aa7277e7edd5c4e}} 
\index{eforth\_core.cpp@{eforth\_core.cpp}!YIELD\_PERIOD@{YIELD\_PERIOD}}
\index{YIELD\_PERIOD@{YIELD\_PERIOD}!eforth\_core.cpp@{eforth\_core.cpp}}
\doxysubsubsection{\texorpdfstring{YIELD\_PERIOD}{YIELD\_PERIOD}}
{\footnotesize\ttfamily \#define Y\+I\+E\+L\+D\+\_\+\+P\+E\+R\+I\+OD~50      /$\ast$$\ast$ 256 max (1ms $\sim$ 50$\ast$20us/op) $\ast$/}

\begin{quote}
service interrupt routines \end{quote}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{eforth__core_8cpp_a0132f57c344961e9ff4037dd06b06948}\label{eforth__core_8cpp_a0132f57c344961e9ff4037dd06b06948}} 
\index{eforth\_core.cpp@{eforth\_core.cpp}!intr\_reset@{intr\_reset}}
\index{intr\_reset@{intr\_reset}!eforth\_core.cpp@{eforth\_core.cpp}}
\doxysubsubsection{\texorpdfstring{intr\_reset()}{intr\_reset()}}
{\footnotesize\ttfamily void intr\+\_\+reset (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



reset interrupts 

\begin{quote}
reset interrupt states \end{quote}
\mbox{\Hypertarget{eforth__core_8cpp_a2c97726ffb62839e8c6fe399f6ed83f3}\label{eforth__core_8cpp_a2c97726ffb62839e8c6fe399f6ed83f3}} 
\index{eforth\_core.cpp@{eforth\_core.cpp}!intr\_service@{intr\_service}}
\index{intr\_service@{intr\_service}!eforth\_core.cpp@{eforth\_core.cpp}}
\doxysubsubsection{\texorpdfstring{intr\_service()}{intr\_service()}}
{\footnotesize\ttfamily \mbox{\hyperlink{eforth__config_8h_a5fd90490ca5b2ceb72bf8b2c89a9634b}{IU}} intr\+\_\+service (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\begin{quote}
cached interrupt flags \end{quote}


\begin{quote}
throttle counter \end{quote}



\begin{DoxyItemize}
\item on x86 platform
\item throttle down (boot performance a bit)
\item reset throttle counter
\end{DoxyItemize}\mbox{\Hypertarget{eforth__core_8cpp_a1014535a559fffca3f07236e59a20aaf}\label{eforth__core_8cpp_a1014535a559fffca3f07236e59a20aaf}} 
\index{eforth\_core.cpp@{eforth\_core.cpp}!intr\_add\_tmisr@{intr\_add\_tmisr}}
\index{intr\_add\_tmisr@{intr\_add\_tmisr}!eforth\_core.cpp@{eforth\_core.cpp}}
\doxysubsubsection{\texorpdfstring{intr\_add\_tmisr()}{intr\_add\_tmisr()}}
{\footnotesize\ttfamily void intr\+\_\+add\+\_\+tmisr (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{eforth__config_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}}}]{i,  }\item[{\mbox{\hyperlink{eforth__config_8h_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}}}]{ms,  }\item[{\mbox{\hyperlink{eforth__config_8h_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}}}]{xt }\end{DoxyParamCaption})}

\begin{quote}
add timer interrupt service routine \end{quote}
\mbox{\Hypertarget{eforth__core_8cpp_afccceb6e854a93069b6f29bf97657437}\label{eforth__core_8cpp_afccceb6e854a93069b6f29bf97657437}} 
\index{eforth\_core.cpp@{eforth\_core.cpp}!intr\_add\_pcisr@{intr\_add\_pcisr}}
\index{intr\_add\_pcisr@{intr\_add\_pcisr}!eforth\_core.cpp@{eforth\_core.cpp}}
\doxysubsubsection{\texorpdfstring{intr\_add\_pcisr()}{intr\_add\_pcisr()}}
{\footnotesize\ttfamily void intr\+\_\+add\+\_\+pcisr (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{eforth__config_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}}}]{p,  }\item[{\mbox{\hyperlink{eforth__config_8h_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}}}]{xt }\end{DoxyParamCaption})}

\begin{quote}
add pin change interrupt service routine \end{quote}
\mbox{\Hypertarget{eforth__core_8cpp_a57ebb184e4580915047ed5a46ff53263}\label{eforth__core_8cpp_a57ebb184e4580915047ed5a46ff53263}} 
\index{eforth\_core.cpp@{eforth\_core.cpp}!intr\_pci\_enable@{intr\_pci\_enable}}
\index{intr\_pci\_enable@{intr\_pci\_enable}!eforth\_core.cpp@{eforth\_core.cpp}}
\doxysubsubsection{\texorpdfstring{intr\_pci\_enable()}{intr\_pci\_enable()}}
{\footnotesize\ttfamily void intr\+\_\+pci\+\_\+enable (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{eforth__config_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}}}]{f }\end{DoxyParamCaption})}

\begin{quote}
enable/disable pin change interrupt \end{quote}
\mbox{\Hypertarget{eforth__core_8cpp_a7336f28b0a79390b012f36a71e2df5d9}\label{eforth__core_8cpp_a7336f28b0a79390b012f36a71e2df5d9}} 
\index{eforth\_core.cpp@{eforth\_core.cpp}!intr\_timer\_enable@{intr\_timer\_enable}}
\index{intr\_timer\_enable@{intr\_timer\_enable}!eforth\_core.cpp@{eforth\_core.cpp}}
\doxysubsubsection{\texorpdfstring{intr\_timer\_enable()}{intr\_timer\_enable()}}
{\footnotesize\ttfamily void intr\+\_\+timer\+\_\+enable (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{eforth__config_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}}}]{f }\end{DoxyParamCaption})}

\begin{quote}
enable/disable timer2 interrupt \end{quote}
\mbox{\Hypertarget{eforth__core_8cpp_a5686c229bdef50123688ab6cb1404230}\label{eforth__core_8cpp_a5686c229bdef50123688ab6cb1404230}} 
\index{eforth\_core.cpp@{eforth\_core.cpp}!ISR@{ISR}}
\index{ISR@{ISR}!eforth\_core.cpp@{eforth\_core.cpp}}
\doxysubsubsection{\texorpdfstring{ISR()}{ISR()}\hspace{0.1cm}{\footnotesize\ttfamily [1/4]}}
{\footnotesize\ttfamily I\+SR (\begin{DoxyParamCaption}\item[{T\+I\+M\+E\+R2\+\_\+\+C\+O\+M\+P\+A\+\_\+vect}]{ }\end{DoxyParamCaption})}

\begin{quote}
Arduino interrupt service routines \end{quote}
\mbox{\Hypertarget{eforth__core_8cpp_aa64c6dce15e9de9105b4ae9533c9a267}\label{eforth__core_8cpp_aa64c6dce15e9de9105b4ae9533c9a267}} 
\index{eforth\_core.cpp@{eforth\_core.cpp}!ISR@{ISR}}
\index{ISR@{ISR}!eforth\_core.cpp@{eforth\_core.cpp}}
\doxysubsubsection{\texorpdfstring{ISR()}{ISR()}\hspace{0.1cm}{\footnotesize\ttfamily [2/4]}}
{\footnotesize\ttfamily I\+SR (\begin{DoxyParamCaption}\item[{P\+C\+I\+N\+T0\+\_\+vect}]{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{eforth__core_8cpp_afe6035149a64d5f448fbda08e9d1b67f}\label{eforth__core_8cpp_afe6035149a64d5f448fbda08e9d1b67f}} 
\index{eforth\_core.cpp@{eforth\_core.cpp}!ISR@{ISR}}
\index{ISR@{ISR}!eforth\_core.cpp@{eforth\_core.cpp}}
\doxysubsubsection{\texorpdfstring{ISR()}{ISR()}\hspace{0.1cm}{\footnotesize\ttfamily [3/4]}}
{\footnotesize\ttfamily I\+SR (\begin{DoxyParamCaption}\item[{P\+C\+I\+N\+T1\+\_\+vect}]{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{eforth__core_8cpp_a9c4665742c6b6eb1f0bb9dde41f7cba3}\label{eforth__core_8cpp_a9c4665742c6b6eb1f0bb9dde41f7cba3}} 
\index{eforth\_core.cpp@{eforth\_core.cpp}!ISR@{ISR}}
\index{ISR@{ISR}!eforth\_core.cpp@{eforth\_core.cpp}}
\doxysubsubsection{\texorpdfstring{ISR()}{ISR()}\hspace{0.1cm}{\footnotesize\ttfamily [4/4]}}
{\footnotesize\ttfamily I\+SR (\begin{DoxyParamCaption}\item[{P\+C\+I\+N\+T2\+\_\+vect}]{ }\end{DoxyParamCaption})}



\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{eforth__core_8cpp_a6c7ba52511bb7f580b211f466a58001c}\label{eforth__core_8cpp_a6c7ba52511bb7f580b211f466a58001c}} 
\index{eforth\_core.cpp@{eforth\_core.cpp}!ir@{ir}}
\index{ir@{ir}!eforth\_core.cpp@{eforth\_core.cpp}}
\doxysubsubsection{\texorpdfstring{ir}{ir}}
{\footnotesize\ttfamily \mbox{\hyperlink{structIsrRec}{Isr\+Rec}} ir}

interrupt state management 