\hypertarget{eforth__vm_8cpp}{}\doxysection{src/eforth\+\_\+vm.cpp File Reference}
\label{eforth__vm_8cpp}\index{src/eforth\_vm.cpp@{src/eforth\_vm.cpp}}


e\+Forth Virtual Machine module Note\+: indirect threading model -\/ computed label jumping replaced Ef\+V\+M\+Sub module -\/ vtable subroutine calling  


{\ttfamily \#include \char`\"{}eforth\+\_\+core.\+h\char`\"{}}\newline
Include dependency graph for eforth\+\_\+vm.\+cpp\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{eforth__vm_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{Namespaces}
\begin{DoxyCompactItemize}
\item 
 \mbox{\hyperlink{namespaceEfVM}{Ef\+VM}}
\end{DoxyCompactItemize}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{eforth__vm_8cpp_ad572a768450b0c645d096d7e830c25cc}{R\+A\+M\+\_\+\+F\+L\+AG}}~0xe000
\item 
\#define \mbox{\hyperlink{eforth__vm_8cpp_ab57397937f994e7b94ffe50762a7d046}{O\+F\+F\+\_\+\+M\+A\+SK}}~0x07ff
\item 
\#define \mbox{\hyperlink{eforth__vm_8cpp_a9d91438cfe35ddd3db827add653cf917}{I\+R\+E\+T\+\_\+\+F\+L\+AG}}~0x8000
\item 
\#define \mbox{\hyperlink{eforth__vm_8cpp_a1f75956c7e91b6411417071ea93f7bfe}{B\+O\+OL}}(f)~((f) ? \mbox{\hyperlink{eforth__core_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{T\+R\+UE}} \+: \mbox{\hyperlink{eforth__core_8h_aa93f0eb578d23995850d61f7d61c55c1}{F\+A\+L\+SE}})
\item 
\#define \mbox{\hyperlink{eforth__vm_8cpp_a77270f01b515a878ec2853760cb20dfa}{B\+S\+ET}}(d,  c)~(\+\_\+data\mbox{[}(d)\&\mbox{\hyperlink{eforth__vm_8cpp_ab57397937f994e7b94ffe50762a7d046}{O\+F\+F\+\_\+\+M\+A\+SK}}\mbox{]}=(\mbox{\hyperlink{eforth__core_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}})(c))
\item 
\#define \mbox{\hyperlink{eforth__vm_8cpp_ac90aeca39f45fc56ac96c675d18a7e78}{S\+ET}}(d,  v)~($\ast$((\mbox{\hyperlink{eforth__core_8h_a149fe3b107a553d7f4a2fcf3adc02b6a}{DU}}$\ast$)\&\+\_\+data\mbox{[}(d)\&\mbox{\hyperlink{eforth__vm_8cpp_ab57397937f994e7b94ffe50762a7d046}{O\+F\+F\+\_\+\+M\+A\+SK}}\mbox{]})=(v))
\item 
\#define \mbox{\hyperlink{eforth__vm_8cpp_a35a26ccdccc5949a9553ce8547b3814c}{S2D}}(h,  l)~(((\mbox{\hyperlink{eforth__core_8h_a39c786017723555afb9e8b85accec0de}{S32}})(h)$<$$<$16) $\vert$ ((l)\&0xffff))
\item 
\#define \mbox{\hyperlink{eforth__vm_8cpp_a2106695e949772f765546777ef34690e}{P\+OP}}()~(top  = $\ast$DS-\/-\/)
\item 
\#define \mbox{\hyperlink{eforth__vm_8cpp_a55b5173e6face979deb7372dcbb643df}{R\+P\+OP}}()~(rtop = $\ast$RS++)
\item 
\#define \mbox{\hyperlink{eforth__vm_8cpp_a2a0ab46d7e9f1c39675adabb666df35d}{D\+T\+OP}}(d)~\{ $\ast$DS = (d) \& 0xffff; top = (d)$>$$>$16; \}
\item 
\#define \mbox{\hyperlink{eforth__vm_8cpp_afc09b15fce90b9e00aa7277e7edd5c4e}{Y\+I\+E\+L\+D\+\_\+\+P\+E\+R\+I\+OD}}~100
\item 
\#define \mbox{\hyperlink{eforth__vm_8cpp_ab225fd437247be81c502ebd3b4857465}{Y\+I\+E\+LD}}()
\item 
\#define \mbox{\hyperlink{eforth__vm_8cpp_ac7635cecf944d5bfcc89665c08022828}{OP}}(name)~\&\&L\+\_\+\#\#name /$\ast$$\ast$ redefined for label address $\ast$/
\item 
\#define \mbox{\hyperlink{eforth__vm_8cpp_a694d28437d830c2e82367a5b56ae5163}{\+\_\+X}}(n,  code)~L\+\_\+\#\#n\+: \{ code; goto vm\+\_\+next; \}
\item 
\#define \mbox{\hyperlink{eforth__vm_8cpp_afb8567e3f319c82c1818e2ead689e355}{\+\_\+Y}}(n,  fn)~L\+\_\+\#\#n\+: \{ fn(); continue; \}
\end{DoxyCompactItemize}
\begin{Indent}\textbf{ Tracing}\par
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{eforth__vm_8cpp_a7d020b5dd8606c615fa96fbe2647a4b0}{T\+R\+A\+CE}}()~/$\ast$ skip $\ast$/
\end{DoxyCompactItemize}
\end{Indent}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{eforth__core_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}} \mbox{\hyperlink{namespaceEfVM_ab9cd2e7aef4c537d97137dafd02518ae}{Ef\+V\+M\+::\+B\+G\+ET}} (\mbox{\hyperlink{eforth__core_8h_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}} d)
\item 
\mbox{\hyperlink{eforth__core_8h_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}} \mbox{\hyperlink{namespaceEfVM_a07e74ced8251d26cd20bce5a2c386d7a}{Ef\+V\+M\+::\+G\+ET}} (\mbox{\hyperlink{eforth__core_8h_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}} d)
\item 
void \mbox{\hyperlink{namespaceEfVM_ac4f69cc49b68f10383886820029f6257}{Ef\+V\+M\+::\+P\+U\+SH}} (\mbox{\hyperlink{eforth__core_8h_a149fe3b107a553d7f4a2fcf3adc02b6a}{DU}} v)
\item 
void \mbox{\hyperlink{namespaceEfVM_acfaf9ecd06a6d4b5dc4243201efaf38e}{Ef\+V\+M\+::\+R\+P\+U\+SH}} (\mbox{\hyperlink{eforth__core_8h_a149fe3b107a553d7f4a2fcf3adc02b6a}{DU}} v)
\item 
void \mbox{\hyperlink{namespaceEfVM_a00e088a5d3bf8e5b61d5b8c798ebd9dc}{Ef\+V\+M\+::\+N\+E\+XT}} ()
\item 
\mbox{\hyperlink{eforth__core_8h_a149fe3b107a553d7f4a2fcf3adc02b6a}{DU}} \mbox{\hyperlink{namespaceEfVM_a7e34acafb10058a978a767187f52a6b8}{Ef\+V\+M\+::\+\_\+depth}} ()
\item 
void \mbox{\hyperlink{namespaceEfVM_aaaa9f256ad4e73f2885577923fa23447}{Ef\+V\+M\+::\+\_\+init}} ()
\item 
void \mbox{\hyperlink{namespaceEfVM_a1149487a9866fbd91d4ccaf57eab9ea6}{Ef\+V\+M\+::\+\_\+yield}} ()
\begin{DoxyCompactList}\small\item\em \begin{quote}
yield to interrupt service \end{quote}
\end{DoxyCompactList}\item 
void \mbox{\hyperlink{namespaceEfVM_a2afadbdf0e72c8707edfebe583a5dfa6}{Ef\+V\+M\+::\+\_\+qrx}} ()
\begin{DoxyCompactList}\small\item\em \begin{quote}
( -- c ) fetch a char from console \end{quote}
\end{DoxyCompactList}\item 
void \mbox{\hyperlink{namespaceEfVM_ad93fbce2cb609c605aa8df2355c8e16b}{Ef\+V\+M\+::\+\_\+txsto}} ()
\begin{DoxyCompactList}\small\item\em \begin{quote}
(c -- ) send a char to console \end{quote}
\end{DoxyCompactList}\item 
void \mbox{\hyperlink{namespaceEfVM_a88be037f3c5ddd06681d8775769b5bec}{Ef\+V\+M\+::\+\_\+execu}} ()
\begin{DoxyCompactList}\small\item\em \begin{quote}
(a -- ) take execution address from data stack and execute the token \end{quote}
\end{DoxyCompactList}\item 
void \mbox{\hyperlink{namespaceEfVM_a04b479eed7bc0fa0b9c8600f47c04cba}{Ef\+V\+M\+::\+\_\+ummod}} ()
\begin{DoxyCompactList}\small\item\em (udl udh u -- ur uq) unsigned divide of a double by single \end{DoxyCompactList}\item 
void \mbox{\hyperlink{eforth__vm_8cpp_ab96d3e1cfedd27d24fea512540b32a98}{vm\+\_\+init}} (P\+G\+M\+\_\+P rom, \mbox{\hyperlink{eforth__core_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}} $\ast$data, void $\ast$io\+\_\+stream)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static Stream $\ast$ \mbox{\hyperlink{namespaceEfVM_aa5ac1bb7ff2e93de1df7e220797fc690}{Ef\+V\+M\+::io}}
\item 
int \mbox{\hyperlink{namespaceEfVM_a09d628000e6b3bb7306a3bc9c3299efe}{Ef\+V\+M\+::\+\_\+yield\+\_\+cnt}} = 0
\begin{DoxyCompactList}\small\item\em interrupt service throttle counter \end{DoxyCompactList}\end{DoxyCompactItemize}
\begin{Indent}\textbf{ Control}\par
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{eforth__core_8h_a5fd90490ca5b2ceb72bf8b2c89a9634b}{IU}} \mbox{\hyperlink{namespaceEfVM_a4444ce01dd126290156b6339aedb281b}{Ef\+V\+M\+::\+PC}}
\begin{DoxyCompactList}\small\item\em program counter, IU is 16-\/bit \end{DoxyCompactList}\item 
\mbox{\hyperlink{eforth__core_8h_a5fd90490ca5b2ceb72bf8b2c89a9634b}{IU}} \mbox{\hyperlink{namespaceEfVM_a34e9492841c1a98e29286c41dcdac10b}{Ef\+V\+M\+::\+IP}}
\begin{DoxyCompactList}\small\item\em instruction pointer, IU is 16-\/bit, opcode is 8-\/bit \end{DoxyCompactList}\item 
\mbox{\hyperlink{eforth__core_8h_a149fe3b107a553d7f4a2fcf3adc02b6a}{DU}} \mbox{\hyperlink{namespaceEfVM_a0d508bfbdbd7a09dcd56a24e3b6cb169}{Ef\+V\+M\+::top}}
\begin{DoxyCompactList}\small\item\em A\+LU (i.\+e. cached top of stack value) \end{DoxyCompactList}\item 
\mbox{\hyperlink{eforth__core_8h_a149fe3b107a553d7f4a2fcf3adc02b6a}{DU}} \mbox{\hyperlink{namespaceEfVM_a61aea862ab3bab556736663c844366c7}{Ef\+V\+M\+::rtop}}
\item 
\mbox{\hyperlink{eforth__core_8h_a5fd90490ca5b2ceb72bf8b2c89a9634b}{IU}} \mbox{\hyperlink{namespaceEfVM_ad6bf1128d9ffa5007021ecabed123c74}{Ef\+V\+M\+::\+IR}}
\begin{DoxyCompactList}\small\item\em interrupt service routine \end{DoxyCompactList}\end{DoxyCompactItemize}
\end{Indent}
\begin{Indent}\textbf{ Storage}\par
\begin{DoxyCompactItemize}
\item 
P\+G\+M\+\_\+P \mbox{\hyperlink{namespaceEfVM_a84f1ef51c831a00617756c690faa7194}{Ef\+V\+M\+::\+\_\+rom}}
\begin{DoxyCompactList}\small\item\em R\+OM, Forth word stored in Arduino Flash Memory. \end{DoxyCompactList}\item 
\mbox{\hyperlink{eforth__core_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}} $\ast$ \mbox{\hyperlink{namespaceEfVM_a57dd3214293027b21298f155ebae4e19}{Ef\+V\+M\+::\+\_\+data}}
\begin{DoxyCompactList}\small\item\em R\+AM, memory block for user define dictionary. \end{DoxyCompactList}\item 
\mbox{\hyperlink{eforth__core_8h_a149fe3b107a553d7f4a2fcf3adc02b6a}{DU}} $\ast$ \mbox{\hyperlink{namespaceEfVM_aa76f09a5a1c8d753230006aab2827d3f}{Ef\+V\+M\+::\+DS}}
\begin{DoxyCompactList}\small\item\em data stack pointer, Dr. Ting\textquotesingle{}s stack \end{DoxyCompactList}\item 
\mbox{\hyperlink{eforth__core_8h_a149fe3b107a553d7f4a2fcf3adc02b6a}{DU}} $\ast$ \mbox{\hyperlink{namespaceEfVM_abf397b013c4b72715edcab1de7a6f2a1}{Ef\+V\+M\+::\+RS}}
\begin{DoxyCompactList}\small\item\em return stack pointer, Dr. Ting\textquotesingle{}s rack \end{DoxyCompactList}\end{DoxyCompactItemize}
\end{Indent}
\begin{Indent}\textbf{ Control}\par
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{eforth__core_8h_a5fd90490ca5b2ceb72bf8b2c89a9634b}{IU}} \mbox{\hyperlink{namespaceEfVM_a4444ce01dd126290156b6339aedb281b}{Ef\+V\+M\+::\+PC}}
\begin{DoxyCompactList}\small\item\em program counter, IU is 16-\/bit \end{DoxyCompactList}\item 
\mbox{\hyperlink{eforth__core_8h_a5fd90490ca5b2ceb72bf8b2c89a9634b}{IU}} \mbox{\hyperlink{namespaceEfVM_a34e9492841c1a98e29286c41dcdac10b}{Ef\+V\+M\+::\+IP}}
\begin{DoxyCompactList}\small\item\em instruction pointer, IU is 16-\/bit, opcode is 8-\/bit \end{DoxyCompactList}\item 
\mbox{\hyperlink{eforth__core_8h_a149fe3b107a553d7f4a2fcf3adc02b6a}{DU}} \mbox{\hyperlink{namespaceEfVM_a0d508bfbdbd7a09dcd56a24e3b6cb169}{Ef\+V\+M\+::top}}
\begin{DoxyCompactList}\small\item\em A\+LU (i.\+e. cached top of stack value) \end{DoxyCompactList}\item 
\mbox{\hyperlink{eforth__core_8h_a149fe3b107a553d7f4a2fcf3adc02b6a}{DU}} \mbox{\hyperlink{namespaceEfVM_a61aea862ab3bab556736663c844366c7}{Ef\+V\+M\+::rtop}}
\item 
\mbox{\hyperlink{eforth__core_8h_a5fd90490ca5b2ceb72bf8b2c89a9634b}{IU}} \mbox{\hyperlink{namespaceEfVM_ad6bf1128d9ffa5007021ecabed123c74}{Ef\+V\+M\+::\+IR}}
\begin{DoxyCompactList}\small\item\em interrupt service routine \end{DoxyCompactList}\end{DoxyCompactItemize}
\end{Indent}
\begin{Indent}\textbf{ Storage}\par
\begin{DoxyCompactItemize}
\item 
P\+G\+M\+\_\+P \mbox{\hyperlink{namespaceEfVM_a84f1ef51c831a00617756c690faa7194}{Ef\+V\+M\+::\+\_\+rom}}
\begin{DoxyCompactList}\small\item\em R\+OM, Forth word stored in Arduino Flash Memory. \end{DoxyCompactList}\item 
\mbox{\hyperlink{eforth__core_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}} $\ast$ \mbox{\hyperlink{namespaceEfVM_a57dd3214293027b21298f155ebae4e19}{Ef\+V\+M\+::\+\_\+data}}
\begin{DoxyCompactList}\small\item\em R\+AM, memory block for user define dictionary. \end{DoxyCompactList}\item 
\mbox{\hyperlink{eforth__core_8h_a149fe3b107a553d7f4a2fcf3adc02b6a}{DU}} $\ast$ \mbox{\hyperlink{namespaceEfVM_aa76f09a5a1c8d753230006aab2827d3f}{Ef\+V\+M\+::\+DS}}
\begin{DoxyCompactList}\small\item\em data stack pointer, Dr. Ting\textquotesingle{}s stack \end{DoxyCompactList}\item 
\mbox{\hyperlink{eforth__core_8h_a149fe3b107a553d7f4a2fcf3adc02b6a}{DU}} $\ast$ \mbox{\hyperlink{namespaceEfVM_abf397b013c4b72715edcab1de7a6f2a1}{Ef\+V\+M\+::\+RS}}
\begin{DoxyCompactList}\small\item\em return stack pointer, Dr. Ting\textquotesingle{}s rack \end{DoxyCompactList}\end{DoxyCompactItemize}
\end{Indent}


\doxysubsection{Detailed Description}
e\+Forth Virtual Machine module Note\+: indirect threading model -\/ computed label jumping replaced Ef\+V\+M\+Sub module -\/ vtable subroutine calling 

\doxysubparagraph*{e\+Forth Memory map}


\begin{DoxyCode}{0}
\DoxyCodeLine{0x0000-\/0x1fff ROM (8K Flash memory)}
\DoxyCodeLine{0x2000-\/0x27ff RAM (2K dynamic memory)}
\DoxyCodeLine{    0x2000-\/0x23ff User Dictionary}
\DoxyCodeLine{    0x2400-\/0x241f User Variables}
\DoxyCodeLine{    0x2420-\/0x24ff Return/Data Stack}
\DoxyCodeLine{    0x2500-\/0x257f TIB (Terminal Input Buffer)}
\end{DoxyCode}


\doxysubparagraph*{Data and Return Stack}


\begin{DoxyCode}{0}
\DoxyCodeLine{        S                   \mbox{\hyperlink{namespaceEfAsm_a85323f491b7b3ea3883bad0c91d9de17}{R}}}
\DoxyCodeLine{        |                   |}
\DoxyCodeLine{\mbox{\hyperlink{namespaceEfVM_a0d508bfbdbd7a09dcd56a24e3b6cb169}{top}} -\/> [S0, S1, S2,..., R1, R0]}
\end{DoxyCode}
 Note\+: Dr. Ting uses U8 (0$\sim$255) for wrap-\/around control 

\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{eforth__vm_8cpp_ad572a768450b0c645d096d7e830c25cc}\label{eforth__vm_8cpp_ad572a768450b0c645d096d7e830c25cc}} 
\index{eforth\_vm.cpp@{eforth\_vm.cpp}!RAM\_FLAG@{RAM\_FLAG}}
\index{RAM\_FLAG@{RAM\_FLAG}!eforth\_vm.cpp@{eforth\_vm.cpp}}
\doxysubsubsection{\texorpdfstring{RAM\_FLAG}{RAM\_FLAG}}
{\footnotesize\ttfamily \#define R\+A\+M\+\_\+\+F\+L\+AG~0xe000}

R\+AM ranger (0x2000$\sim$0x7fff) \mbox{\Hypertarget{eforth__vm_8cpp_ab57397937f994e7b94ffe50762a7d046}\label{eforth__vm_8cpp_ab57397937f994e7b94ffe50762a7d046}} 
\index{eforth\_vm.cpp@{eforth\_vm.cpp}!OFF\_MASK@{OFF\_MASK}}
\index{OFF\_MASK@{OFF\_MASK}!eforth\_vm.cpp@{eforth\_vm.cpp}}
\doxysubsubsection{\texorpdfstring{OFF\_MASK}{OFF\_MASK}}
{\footnotesize\ttfamily \#define O\+F\+F\+\_\+\+M\+A\+SK~0x07ff}

R\+AM offset mask (0x0000$\sim$0x07ff) \mbox{\Hypertarget{eforth__vm_8cpp_a9d91438cfe35ddd3db827add653cf917}\label{eforth__vm_8cpp_a9d91438cfe35ddd3db827add653cf917}} 
\index{eforth\_vm.cpp@{eforth\_vm.cpp}!IRET\_FLAG@{IRET\_FLAG}}
\index{IRET\_FLAG@{IRET\_FLAG}!eforth\_vm.cpp@{eforth\_vm.cpp}}
\doxysubsubsection{\texorpdfstring{IRET\_FLAG}{IRET\_FLAG}}
{\footnotesize\ttfamily \#define I\+R\+E\+T\+\_\+\+F\+L\+AG~0x8000}

interrupt return flag ~\newline
 \mbox{\Hypertarget{eforth__vm_8cpp_a1f75956c7e91b6411417071ea93f7bfe}\label{eforth__vm_8cpp_a1f75956c7e91b6411417071ea93f7bfe}} 
\index{eforth\_vm.cpp@{eforth\_vm.cpp}!BOOL@{BOOL}}
\index{BOOL@{BOOL}!eforth\_vm.cpp@{eforth\_vm.cpp}}
\doxysubsubsection{\texorpdfstring{BOOL}{BOOL}}
{\footnotesize\ttfamily \#define B\+O\+OL(\begin{DoxyParamCaption}\item[{}]{f }\end{DoxyParamCaption})~((f) ? \mbox{\hyperlink{eforth__core_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{T\+R\+UE}} \+: \mbox{\hyperlink{eforth__core_8h_aa93f0eb578d23995850d61f7d61c55c1}{F\+A\+L\+SE}})}

\mbox{\Hypertarget{eforth__vm_8cpp_a77270f01b515a878ec2853760cb20dfa}\label{eforth__vm_8cpp_a77270f01b515a878ec2853760cb20dfa}} 
\index{eforth\_vm.cpp@{eforth\_vm.cpp}!BSET@{BSET}}
\index{BSET@{BSET}!eforth\_vm.cpp@{eforth\_vm.cpp}}
\doxysubsubsection{\texorpdfstring{BSET}{BSET}}
{\footnotesize\ttfamily \#define B\+S\+ET(\begin{DoxyParamCaption}\item[{}]{d,  }\item[{}]{c }\end{DoxyParamCaption})~(\+\_\+data\mbox{[}(d)\&\mbox{\hyperlink{eforth__vm_8cpp_ab57397937f994e7b94ffe50762a7d046}{O\+F\+F\+\_\+\+M\+A\+SK}}\mbox{]}=(\mbox{\hyperlink{eforth__core_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}})(c))}

\mbox{\Hypertarget{eforth__vm_8cpp_ac90aeca39f45fc56ac96c675d18a7e78}\label{eforth__vm_8cpp_ac90aeca39f45fc56ac96c675d18a7e78}} 
\index{eforth\_vm.cpp@{eforth\_vm.cpp}!SET@{SET}}
\index{SET@{SET}!eforth\_vm.cpp@{eforth\_vm.cpp}}
\doxysubsubsection{\texorpdfstring{SET}{SET}}
{\footnotesize\ttfamily \#define S\+ET(\begin{DoxyParamCaption}\item[{}]{d,  }\item[{}]{v }\end{DoxyParamCaption})~($\ast$((\mbox{\hyperlink{eforth__core_8h_a149fe3b107a553d7f4a2fcf3adc02b6a}{DU}}$\ast$)\&\+\_\+data\mbox{[}(d)\&\mbox{\hyperlink{eforth__vm_8cpp_ab57397937f994e7b94ffe50762a7d046}{O\+F\+F\+\_\+\+M\+A\+SK}}\mbox{]})=(v))}

\mbox{\Hypertarget{eforth__vm_8cpp_a35a26ccdccc5949a9553ce8547b3814c}\label{eforth__vm_8cpp_a35a26ccdccc5949a9553ce8547b3814c}} 
\index{eforth\_vm.cpp@{eforth\_vm.cpp}!S2D@{S2D}}
\index{S2D@{S2D}!eforth\_vm.cpp@{eforth\_vm.cpp}}
\doxysubsubsection{\texorpdfstring{S2D}{S2D}}
{\footnotesize\ttfamily \#define S2D(\begin{DoxyParamCaption}\item[{}]{h,  }\item[{}]{l }\end{DoxyParamCaption})~(((\mbox{\hyperlink{eforth__core_8h_a39c786017723555afb9e8b85accec0de}{S32}})(h)$<$$<$16) $\vert$ ((l)\&0xffff))}

\mbox{\Hypertarget{eforth__vm_8cpp_a2106695e949772f765546777ef34690e}\label{eforth__vm_8cpp_a2106695e949772f765546777ef34690e}} 
\index{eforth\_vm.cpp@{eforth\_vm.cpp}!POP@{POP}}
\index{POP@{POP}!eforth\_vm.cpp@{eforth\_vm.cpp}}
\doxysubsubsection{\texorpdfstring{POP}{POP}}
{\footnotesize\ttfamily \#define P\+OP(\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})~(top  = $\ast$DS-\/-\/)}

\mbox{\Hypertarget{eforth__vm_8cpp_a55b5173e6face979deb7372dcbb643df}\label{eforth__vm_8cpp_a55b5173e6face979deb7372dcbb643df}} 
\index{eforth\_vm.cpp@{eforth\_vm.cpp}!RPOP@{RPOP}}
\index{RPOP@{RPOP}!eforth\_vm.cpp@{eforth\_vm.cpp}}
\doxysubsubsection{\texorpdfstring{RPOP}{RPOP}}
{\footnotesize\ttfamily \#define R\+P\+OP(\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})~(rtop = $\ast$RS++)}

\mbox{\Hypertarget{eforth__vm_8cpp_a2a0ab46d7e9f1c39675adabb666df35d}\label{eforth__vm_8cpp_a2a0ab46d7e9f1c39675adabb666df35d}} 
\index{eforth\_vm.cpp@{eforth\_vm.cpp}!DTOP@{DTOP}}
\index{DTOP@{DTOP}!eforth\_vm.cpp@{eforth\_vm.cpp}}
\doxysubsubsection{\texorpdfstring{DTOP}{DTOP}}
{\footnotesize\ttfamily \#define D\+T\+OP(\begin{DoxyParamCaption}\item[{}]{d }\end{DoxyParamCaption})~\{ $\ast$DS = (d) \& 0xffff; top = (d)$>$$>$16; \}}

\mbox{\Hypertarget{eforth__vm_8cpp_a7d020b5dd8606c615fa96fbe2647a4b0}\label{eforth__vm_8cpp_a7d020b5dd8606c615fa96fbe2647a4b0}} 
\index{eforth\_vm.cpp@{eforth\_vm.cpp}!TRACE@{TRACE}}
\index{TRACE@{TRACE}!eforth\_vm.cpp@{eforth\_vm.cpp}}
\doxysubsubsection{\texorpdfstring{TRACE}{TRACE}}
{\footnotesize\ttfamily \#define T\+R\+A\+CE(\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})~/$\ast$ skip $\ast$/}

\mbox{\Hypertarget{eforth__vm_8cpp_afc09b15fce90b9e00aa7277e7edd5c4e}\label{eforth__vm_8cpp_afc09b15fce90b9e00aa7277e7edd5c4e}} 
\index{eforth\_vm.cpp@{eforth\_vm.cpp}!YIELD\_PERIOD@{YIELD\_PERIOD}}
\index{YIELD\_PERIOD@{YIELD\_PERIOD}!eforth\_vm.cpp@{eforth\_vm.cpp}}
\doxysubsubsection{\texorpdfstring{YIELD\_PERIOD}{YIELD\_PERIOD}}
{\footnotesize\ttfamily \#define Y\+I\+E\+L\+D\+\_\+\+P\+E\+R\+I\+OD~100}

\mbox{\Hypertarget{eforth__vm_8cpp_ab225fd437247be81c502ebd3b4857465}\label{eforth__vm_8cpp_ab225fd437247be81c502ebd3b4857465}} 
\index{eforth\_vm.cpp@{eforth\_vm.cpp}!YIELD@{YIELD}}
\index{YIELD@{YIELD}!eforth\_vm.cpp@{eforth\_vm.cpp}}
\doxysubsubsection{\texorpdfstring{YIELD}{YIELD}}
{\footnotesize\ttfamily \#define Y\+I\+E\+LD(\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{    \textcolor{keywordflow}{if} (!\mbox{\hyperlink{namespaceEfVM_ad6bf1128d9ffa5007021ecabed123c74}{IR}} \&\& ++\mbox{\hyperlink{namespaceEfVM_a09d628000e6b3bb7306a3bc9c3299efe}{\_yield\_cnt}} > \mbox{\hyperlink{eforth__vm_8cpp_afc09b15fce90b9e00aa7277e7edd5c4e}{YIELD\_PERIOD}}) \{ \(\backslash\)}
\DoxyCodeLine{        \_yield\_cnt = 0;                       \(\backslash\)}
\DoxyCodeLine{        \_yield();                             \(\backslash\)}
\DoxyCodeLine{    \}}

\end{DoxyCode}
\mbox{\Hypertarget{eforth__vm_8cpp_ac7635cecf944d5bfcc89665c08022828}\label{eforth__vm_8cpp_ac7635cecf944d5bfcc89665c08022828}} 
\index{eforth\_vm.cpp@{eforth\_vm.cpp}!OP@{OP}}
\index{OP@{OP}!eforth\_vm.cpp@{eforth\_vm.cpp}}
\doxysubsubsection{\texorpdfstring{OP}{OP}}
{\footnotesize\ttfamily \#define OP(\begin{DoxyParamCaption}\item[{}]{name }\end{DoxyParamCaption})~\&\&L\+\_\+\#\#name /$\ast$$\ast$ redefined for label address $\ast$/}

e\+Forth virtual machine outer interpreter (single-\/step) execution unit \begin{DoxyReturn}{Returns}
0 -\/ exit Note\+: vm\+\_\+outer -\/ computed label jumps (25\% faster than subroutine calls) 
\end{DoxyReturn}
\mbox{\Hypertarget{eforth__vm_8cpp_a694d28437d830c2e82367a5b56ae5163}\label{eforth__vm_8cpp_a694d28437d830c2e82367a5b56ae5163}} 
\index{eforth\_vm.cpp@{eforth\_vm.cpp}!\_X@{\_X}}
\index{\_X@{\_X}!eforth\_vm.cpp@{eforth\_vm.cpp}}
\doxysubsubsection{\texorpdfstring{\_X}{\_X}}
{\footnotesize\ttfamily \#define \+\_\+X(\begin{DoxyParamCaption}\item[{}]{n,  }\item[{}]{code }\end{DoxyParamCaption})~L\+\_\+\#\#n\+: \{ code; goto vm\+\_\+next; \}}

\mbox{\Hypertarget{eforth__vm_8cpp_afb8567e3f319c82c1818e2ead689e355}\label{eforth__vm_8cpp_afb8567e3f319c82c1818e2ead689e355}} 
\index{eforth\_vm.cpp@{eforth\_vm.cpp}!\_Y@{\_Y}}
\index{\_Y@{\_Y}!eforth\_vm.cpp@{eforth\_vm.cpp}}
\doxysubsubsection{\texorpdfstring{\_Y}{\_Y}}
{\footnotesize\ttfamily \#define \+\_\+Y(\begin{DoxyParamCaption}\item[{}]{n,  }\item[{}]{fn }\end{DoxyParamCaption})~L\+\_\+\#\#n\+: \{ fn(); continue; \}}



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{eforth__vm_8cpp_ab96d3e1cfedd27d24fea512540b32a98}\label{eforth__vm_8cpp_ab96d3e1cfedd27d24fea512540b32a98}} 
\index{eforth\_vm.cpp@{eforth\_vm.cpp}!vm\_init@{vm\_init}}
\index{vm\_init@{vm\_init}!eforth\_vm.cpp@{eforth\_vm.cpp}}
\doxysubsubsection{\texorpdfstring{vm\_init()}{vm\_init()}}
{\footnotesize\ttfamily void vm\+\_\+init (\begin{DoxyParamCaption}\item[{P\+G\+M\+\_\+P}]{rom,  }\item[{\mbox{\hyperlink{eforth__core_8h_aa63ef7b996d5487ce35a5a66601f3e73}{U8}} $\ast$}]{data,  }\item[{void $\ast$}]{io\+\_\+stream }\end{DoxyParamCaption})}


\begin{DoxyItemize}
\item resetting user variables
\end{DoxyItemize}